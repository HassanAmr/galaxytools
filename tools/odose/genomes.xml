<tool id="ncbi-genome-download" name="ncbi-genome-download" version="0.1.0">
    <description>Download bacterial and fungal genomes from NCBI</description>
    <requirements>
        <requirement type="package" version="0.2.4">ncbi-genome-download</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        ncbi-genome-download 
        --format $ncbi_genome_format 
        #if str($ncbi_genome_search_method) == "taxid":
            --taxid $taxid
        #elif str($ncbi_genome_search_method) == "species_taxid":
            --species-taxid $species_taxid
        #elif str($ncbi_genome_search_method) == "genus":
            --genus-zip $genus
        #end if
        $ncbi_genome_choice &&
        gzip -dr * &&
        mkdir selected_genomes/ &&
        #if str($ncbi_genome_format) == "fasta":
            mv  */*/*/*.fna selected_genomes/
        #end if
        ;
    ]]></command>
    <inputs>
        <param name="ncbi_genome_choice" type="select" label="ncbi-genome-download choices">
            <option value="all">all</option>
            <option value="archaea">archaea</option>
            <option value="bacteria">bacteria</option>
            <option value="fungi">fungi</option>
            <option value="invertebrate">invertebrate</option>
            <option value="plant">plant</option>
            <option value="protozoa">protozoa</option>
            <option value="unknown">unknown</option>
            <option value="vertebrate_mammalian">vertebrate_mammalian</option>
            <option value="vertebrate_other">vertebrate_other</option>
            <option value="viral">viral</option>
        </param>
        <param name="ncbi_genome_format" type="select" label="ncbi-genome-download format options">
            <option value="genbank">genbank</option>
            <option value="fasta">fasta</option>
            <option value="features">features</option>
            <option value="gff">gff</option>
            <option value="protein-fasta">protein-fasta</option>
            <option value="genpept">genpept</option>
            <option value="wgs">wgs</option>
            <option value="cds-fasta">cds-fasta</option>
            <option value="rna-fasta">rna-fasta</option>
            <option value="get_punctate_ERs">assembly-report</option>
            <option value="assembly-stats">assembly-stats</option>
        </param>
        <param name="ncbi_genome_search_method" type="select" label="ncbi-genome-download search method options" >
                <option value="taxid" selected="true">taxid</option>
                <option value="species_taxid">species-taxid</option>
                <option value="genus">genus</option>
            </param>
        <param name="taxid" type="integer" min="0" value="0" help="NCBI taxonomy ID"/>
        <param name="species_taxid" type="integer" min="0" value="0" help="NCBI species taxonomy ID"/>
        <param name="genus" type="text" help="NCBI taxonomy ID"/>
    </inputs>
    <outputs>
        <data format="fasta" name="genomes">
            <discover_datasets pattern="__designation_and_ext__" directory="selected_genomes" visible="true" />
        </data>
    </outputs>
    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>