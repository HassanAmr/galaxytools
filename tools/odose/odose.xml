<tool id="odose" name="odose" version="0.1.0">
    <description>Ortholog Direction of Selection Engine</description>
    <requirements>
        <requirement type="package" version="1.0">odose</requirement>
        <requirement type="package" version="0.2.4">ncbi-genome-download</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        ncbi-genome-download --format $ncbi_genome_format --taxid $taxid $ncbi_genome_choice &&
        gzip -dr * &&
        mkdir tmp/ &&
        #if str($ncbi_genome_format) == "fasta":
            mv  */*/*/*.fna tmp/ &&
        #elif  str($ncbi_genome_format) == "genbank":
            mv  */*/*/*.gbff tmp/ &&
        #end if
        
        #for $usergenerated_fasta in $usergenerated_fastas
            mv $usergenerated_fasta tmp/ &&
        #end for

        ## perform step 4
        ## rest of the ODoSE pipeline


    ]]></command>
    <inputs>
        <param type="data" name="usergenerated_fastas" multiple="true" format="fasta" optional="true" label="user generated fasta files" help="user generated fasta files"/>
        <param name="ncbi_genome_choice" type="select" label="ncbi-genome-download choices">
            <option value="all">all</option>
            <option value="archaea">archaea</option>
            <option value="bacteria">bacteria</option>
            <option value="fungi">fungi</option>
            <option value="invertebrate">invertebrate</option>
            <option value="plant">plant</option>
            <option value="protozoa">protozoa</option>
            <option value="unknown">unknown</option>
            <option value="vertebrate_mammalian">vertebrate_mammalian</option>
            <option value="vertebrate_other">vertebrate_other</option>
            <option value="viral">viral</option>
        </param>
        <param name="ncbi_genome_format" type="select" label="ncbi-genome-download format options">
            <option value="genbank">genbank</option>
            <option value="fasta">fasta</option>
            <option value="features">features</option>
            <option value="gff">gff</option>
            <option value="protein-fasta">protein-fasta</option>
            <option value="genpept">genpept</option>
            <option value="wgs">wgs</option>
            <option value="cds-fasta">cds-fasta</option>
            <option value="rna-fasta">rna-fasta</option>
            <option value="get_punctate_ERs">assembly-report</option>
            <option value="assembly-stats">assembly-stats</option>
        </param>
        <param name="taxid" type="integer" min="0" value="0" help="NCBI taxonomy ID"/>
        <param name="intertaxrec_filtering" type="select" label="Inter-Taxon Recombination Filtering">
            <option value="with_intertaxrec_filtering">With Inter-Taxon Recombination Filtering</option>
            <option value="without_intertaxrec_filtering">Without Inter-Taxon Recombination Filtering</option>
        </param>
        
    </inputs>
    <outputs>
    </outputs>
    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>